CREATE TABLE public.tb_operadora
(
   nu_id_operadora integer NOT NULL, 
   no_codigo character varying(40), 
   tx_nome character varying, 
   CONSTRAINT pk_operadora PRIMARY KEY (nu_id_operadora)
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE public.tb_operadora
  OWNER TO mobisaude_pg_user;

CREATE TABLE public.tb_tipo_problema
(
   nu_id_tipo_problema integer NOT NULL, 
   tx_descricao character varying, 
   CONSTRAINT pk_tipo_problema PRIMARY KEY (nu_id_tipo_problema)
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE public.tb_tipo_problema
  OWNER TO mobisaude_pg_user;

CREATE TABLE public.tb_tipo_ambiente
(
   nu_id_tipo_ambiente integer NOT NULL, 
   tx_descricao character varying, 
   CONSTRAINT pk_tipo_ambiente PRIMARY KEY (nu_id_tipo_ambiente)
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE public.tb_tipo_ambiente
  OWNER TO mobisaude_pg_user;

CREATE TABLE public.tb_tipo_sistema_operacional
(
   nu_id_tipo_sistema_operacional integer NOT NULL, 
   tx_descricao character varying, 
   CONSTRAINT pk_tipo_sistema_operacional PRIMARY KEY (nu_id_tipo_sistema_operacional)
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE public.tb_tipo_sistema_operacional
  OWNER TO mobisaude_pg_user;

CREATE TABLE public.tb_problema
(
   nu_id_problema integer NOT NULL, 
   nu_id_operadora integer, 
   nu_id_operadora_dispositivo integer, 
   nu_id_tipo_problema integer, 
   nu_id_tipo_ambiente integer, 
   nu_id_tipo_sistema_operacional integer, 
   no_versao_app character varying, 
   nu_latitude double precision, 
   nu_longitude double precision, 
   nu_nivel_sinal double precision, 
   tx_symcard character varying, 
   CONSTRAINT pk_problema PRIMARY KEY (nu_id_problema), 
   CONSTRAINT fk_problema_operadora FOREIGN KEY (nu_id_operadora) REFERENCES tb_operadora (nu_id_operadora) ON UPDATE NO ACTION ON DELETE NO ACTION, 
   CONSTRAINT fk_problema_operadora_dispositivo FOREIGN KEY (nu_id_operadora_dispositivo) REFERENCES tb_operadora (nu_id_operadora) ON UPDATE NO ACTION ON DELETE NO ACTION, 
   CONSTRAINT fk_problema_tipo_problema FOREIGN KEY (nu_id_tipo_problema) REFERENCES tb_tipo_problema (nu_id_tipo_problema) ON UPDATE NO ACTION ON DELETE NO ACTION, 
   CONSTRAINT fk_problema_tipo_ambiente FOREIGN KEY (nu_id_tipo_ambiente) REFERENCES tb_tipo_ambiente (nu_id_tipo_ambiente) ON UPDATE NO ACTION ON DELETE NO ACTION, 
   CONSTRAINT fk_problema_tipo_so FOREIGN KEY (nu_id_tipo_sistema_operacional) REFERENCES tb_tipo_sistema_operacional (nu_id_tipo_sistema_operacional) ON UPDATE NO ACTION ON DELETE NO ACTION
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE public.tb_problema
  OWNER TO mobisaude_pg_user;

CREATE SEQUENCE public.seq_problema
   INCREMENT 1
   START 1;
ALTER SEQUENCE public.seq_problema
  OWNER TO mobisaude_pg_user;

insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (1, 'CLARO', 'CLARO');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (2, 'CTBC', 'CTBC');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (3, 'NEXTEL', 'NEXTEL');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (4, 'OI', 'OI');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (5, 'SERCOMTEL', 'SERCOMTEL');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (6, 'TIM', 'TIM');
insert into tb_operadora (nu_id_operadora, no_codigo, tx_nome) values (7, 'VIVO', 'VIVO');

insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (1, 'Voz/A ligação (chamada) não completa');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (2, 'Voz/Queda da ligação (chamada)');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (3, 'Voz/Falta de sinal/Sem serviço');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (4, 'Voz/Ligação ruim (mudo, ruído ou cortando)');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (5, 'Dados/Falta de sinal/Sem conexão');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (6, 'Dados/Internet (conexão) lenta');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (7, 'Dados/Queda na conexão');
insert into tb_tipo_problema (nu_id_tipo_problema, tx_descricao) values (8, 'Dados/Internet (conexão) instável/ruim');

insert into tb_tipo_ambiente (nu_id_tipo_ambiente, tx_descricao) values (1, 'Interno');
insert into tb_tipo_ambiente (nu_id_tipo_ambiente, tx_descricao) values (2, 'Externo');

insert into tb_tipo_sistema_operacional (nu_id_tipo_sistema_operacional, tx_descricao) values (1, 'iOS');
insert into tb_tipo_sistema_operacional (nu_id_tipo_sistema_operacional, tx_descricao) values (2, 'Android');
insert into tb_tipo_sistema_operacional (nu_id_tipo_sistema_operacional, tx_descricao) values (3, 'Windows Phone');

INSERT INTO public.tb_configuracao (nu_id_configuracao, no_chave, tx_valor) values (nextval('seq_configuracao'), 'TEXTO_AJUDA_SERVICO_MOVEL', '');

GRANT ALL ON ALL TABLES IN SCHEMA public TO mobisaude_pg_user;
GRANT ALL ON ALL TABLES IN SCHEMA public TO mobisaude_pg_user;

﻿ALTER TABLE tb_tipo_problema ADD COLUMN ind_excluido character(1) DEFAULT 'N';
ALTER TABLE tb_tipo_ambiente ADD COLUMN ind_excluido character(1) DEFAULT 'N';
